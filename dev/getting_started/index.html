<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Getting Started · Experimenter.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://JamieMair.github.io/Experimenter.jl/getting_started/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">Experimenter.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Getting Started</a><ul class="internal"><li><a class="tocitem" href="#Opening-the-database"><span>Opening the database</span></a></li><li class="toplevel"><a class="tocitem" href="#in-run.jl"><span>in run.jl</span></a></li><li class="toplevel"><a class="tocitem" href="#in-a-script"><span>in a script</span></a></li><li class="toplevel"><a class="tocitem" href="#..-or"><span>.. or</span></a></li><li><a class="tocitem" href="#Saving-part-way"><span>Saving part way</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Getting Started</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Getting Started</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JamieMair/Experimenter.jl/blob/main/docs/src/getting_started.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Getting-Started"><a class="docs-heading-anchor" href="#Getting-Started">Getting Started</a><a id="Getting-Started-1"></a><a class="docs-heading-anchor-permalink" href="#Getting-Started" title="Permalink"></a></h1><p><code>Experimenter.jl</code> is a package that is designed to help you keep track of your experiments and their results. It is built to work with <code>Distributed.jl</code> for parallel writing of results to a SQLite database file.</p><h2 id="Opening-the-database"><a class="docs-heading-anchor" href="#Opening-the-database">Opening the database</a><a id="Opening-the-database-1"></a><a class="docs-heading-anchor-permalink" href="#Opening-the-database" title="Permalink"></a></h2><p>To get started, first import the library with:</p><pre><code class="language-julia hljs">using Experimenter
````
After this one needs to create a database to store the results:</code></pre><p>julia db = open_db(&quot;experiments.db&quot;)</p><pre><code class="nohighlight hljs">One can always supply a given directory for the database as well, for example:</code></pre><p>julia db = open_db(&quot;experiments.db&quot;, joinpath(pwd(), &quot;results&quot;))</p><pre><code class="nohighlight hljs">The first call to `open_db` will check if a file already exists. If the file does not exist, `Experimenter.jl` will create the file and the schema for the database.

## Defining the work we want to process

To run an experiment we need to first define a function which runs our experiment:</code></pre><p>julia</p><h1 id="in-run.jl"><a class="docs-heading-anchor" href="#in-run.jl">in run.jl</a><a id="in-run.jl-1"></a><a class="docs-heading-anchor-permalink" href="#in-run.jl" title="Permalink"></a></h1><p>using Random function run<em>trial(config::Dict{Symbol,Any}, trial</em>id)     results = Dict{Symbol, Any}()     sigma = config[:sigma]     N = config[:N]     seed = config[:seed]     rng = Random.Xoshiro(seed)     # Perform some calculation     results[:distance] = sum(rand(rng) * sigma for _ in 1:N)     # Must return a Dict{Symbol, Any}, with the data we want to save     return results end</p><pre><code class="nohighlight hljs">## Creating an experiment

Now we can define a configuration for our experiment:</code></pre><p>julia</p><h1 id="in-a-script"><a class="docs-heading-anchor" href="#in-a-script">in a script</a><a id="in-a-script-1"></a><a class="docs-heading-anchor-permalink" href="#in-a-script" title="Permalink"></a></h1><p>config = Dict{Symbol,Any}(     :N =&gt; IterableVariable([10, 20])     :seed =&gt; IterableVariable([1234, 4321])     :sigma =&gt; 1.0 )</p><pre><code class="nohighlight hljs">This is just a dictionary, with some special wrappers `IterableVariable` for some of the config values. When we create our experiment, we pass in this configuration and the path to the file with the function to run our experiment:</code></pre><p>julia experiment = Experiment(     name=&quot;Test Experiment&quot;,     include<em>file=&quot;run.jl&quot;,     function</em>name=&quot;run_trial&quot;,     configuration=deepcopy(config) )</p><pre><code class="nohighlight hljs">
## Examining the trials of an experiment
We can look at the set of trials this experiment will create:</code></pre><p>julia for trial in experiment     println(trial.configuration) end</p><h1 id="..-or"><a class="docs-heading-anchor" href="#..-or">.. or</a><a id="..-or-1"></a><a class="docs-heading-anchor-permalink" href="#..-or" title="Permalink"></a></h1><p>trials = collect(experiment)</p><pre><code class="nohighlight hljs">There are multiple trials in this experiment as we used an `IterableVariable` wrapper, which says that we want to run a grid search over these specific variables.

## Executing an experiment

To execute our experiment, we use the `@execute` macro. To execute the experiment serially:
</code></pre><p>julia @execute experiment db SerialMode</p><pre><code class="nohighlight hljs">
Instead of `SerialMode`, we can use `ThreadedMode` to execute via `Threads.@threads`, or use `DistributedMode` to execute via a `pmap` and run across different workers.

## Getting the results

Once the experiments are completed, we can run:</code></pre><p>julia trials = get<em>trials</em>by_name(db, &quot;Test Experiment&quot;);</p><pre><code class="nohighlight hljs">
This will return a `Vector{Trial}`, where `Trial` has a `results` field which is the dictionary we returned from the `run_trial` function. To get the results we write:</code></pre><p>julia results = [t.results for t in trials]</p><pre><code class="nohighlight hljs">
## Re-running failed trials

If a trial did not finish, then the `results` field will be missing. Whenever we run the `@execute` macro, it will skip any trial that already has results, and only run the next trials. Therefore </code></pre><p>julia @execute experiment db SerialMode ``` will not run any more trials, as they have already been completed. However, if the execution stopped (for example killed by the SLURM scheduler due to wall time), then it will only run the trials that have not been completed.</p><h2 id="Saving-part-way"><a class="docs-heading-anchor" href="#Saving-part-way">Saving part way</a><a id="Saving-part-way-1"></a><a class="docs-heading-anchor-permalink" href="#Saving-part-way" title="Permalink"></a></h2><p>If your trials take a long time to finish and may be cancelled during their run, you can always implement a way to save a <code>Snapshot</code>, which allows you to save data you need to restore a trial part way through running. The API for this has not yet been documented, but examples can be seen in the unit tests.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Thursday 3 November 2022 23:58">Thursday 3 November 2022</span>. Using Julia version 1.8.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
